<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic-Tac-Toe</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    background: #0d1b2a;
    overflow: hidden;
    color: #fff;
    font-family: Arial, sans-serif;
    padding: 20px;
    position: relative;
  }

  h3 { font-size: 2rem; margin-bottom: 10px; text-align: center; z-index: 2; position: relative; }
  #status { margin-bottom: 20px; font-size: 1.2rem; text-align: center; z-index:2; position: relative; }

  .grid {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 10px;
    z-index: 2;
    position: relative;
  }

  .cell {
    background: #111a27;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    font-weight: bold;
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    border: 2px solid #fff; /* permanent white grid */
  }

  /* Highlight empty cells on hover */
  .cell:hover:not(.taken) {
    background: #1b3a70;
    transform: scale(1.05);
    border: 2px solid #5c7cfa;
    box-shadow: 0 0 10px rgba(92,124,250,0.7);
  }

  .cell.taken { cursor: not-allowed; background: #222d44; }

  button { margin-top: 20px; background-color: #5c7cfa; border: none; color: white; padding: 8px 20px; font-size: 1rem; z-index:2; position: relative;}
  button:hover { background-color: #3b5bdb; }

  .end-screen {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    display:flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #fff;
    font-size: 1.5rem;
    text-align: center;
    z-index: 999;
    display: none;
    padding: 20px;
  }

  .end-screen button {
    margin-top: 20px;
    background-color: #b22222;
    font-size: 1rem;
    padding: 10px 20px;
  }

  .end-screen button:hover { background-color: #ff4d4d; }

  @media(max-width:480px){
    .grid { grid-template-columns: repeat(3, 70px); grid-template-rows: repeat(3, 70px); gap: 8px; }
    .cell { font-size: 2rem; }
    button{ font-size: 0.9rem; padding: 6px 16px; }
  }

  /* Floating X/O shapes */
  .shape {
    position: absolute;
    font-weight: bold;
    color: rgba(92,124,250,0.3);
    user-select: none;
    pointer-events: none;
    animation-name: floatShape;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
    font-size: 20px;
  }

  @keyframes floatShape {
    0% { transform: translateY(100vh) rotate(0deg); opacity:0; }
    10% { opacity:0.4; }
    50% { opacity:0.6; }
    100% { transform: translateY(-20vh) rotate(360deg); opacity:0; }
  }

</style>
</head>
<body>

<h3>Tic-Tac-Toe</h3>
<p id="status">Your turn: X</p>

<div class="grid" id="grid"></div>

<button onclick="resetGame()">Reset</button>

<div class="end-screen" id="endScreen">
  <h2 id="endMessage"></h2>
  <button onclick="resetGame()">Play Again</button>
</div>

<script>
const gridEl = document.getElementById('grid');
const statusEl = document.getElementById('status');
const endScreen = document.getElementById('endScreen');
const endMessage = document.getElementById('endMessage');

let board;
let currentPlayer;
const WIN_COMBOS = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function initGame(){
  board = Array(9).fill('');
  currentPlayer = 'X';
  statusEl.textContent = "Your turn: " + currentPlayer;
  endScreen.style.display = 'none';
  renderBoard();
}

function renderBoard(){
  gridEl.innerHTML = '';
  board.forEach((cell, i) => {
    const div = document.createElement('div');
    div.className = 'cell' + (cell ? ' taken' : '');
    div.textContent = cell;
    div.addEventListener('click', () => handleClick(i));
    gridEl.appendChild(div);
  });
}

function handleClick(i){
  if(board[i] !== '') return;
  board[i] = currentPlayer;
  if(checkWin(currentPlayer)){
    endGame(currentPlayer + " wins!");
    return;
  }
  if(board.every(c => c !== '')){
    endGame("It's a tie!");
    return;
  }
  currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
  statusEl.textContent = "Your turn: " + currentPlayer;
  renderBoard();
}

function checkWin(player){
  return WIN_COMBOS.some(combo => combo.every(i => board[i] === player));
}

function endGame(msg){
  endMessage.textContent = msg;
  endScreen.style.display = 'flex';
}

function resetGame(){ initGame(); }

initGame();

/* Floating X/O shapes animation */
function createShapes(){
  const shapes = ['X','O'];
  for(let i=0;i<20;i++){
    const span = document.createElement('span');
    span.className='shape';
    span.textContent = shapes[Math.floor(Math.random()*2)];
    span.style.left = Math.random()*100 + 'vw';
    span.style.fontSize = 15 + Math.random()*30 + 'px';
    span.style.animationDuration = 5 + Math.random()*10 + 's';
    document.body.appendChild(span);
  }
}

createShapes();
</script>
</body>
</html>
